<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sayble - Ethereal Design</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-icon">
                    <i data-lucide="mic-2" color="white" size="20"></i>
                </div>
                <span class="brand-name">Sayble</span>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-item active" data-page="home">
                    <i data-lucide="layout-dashboard"></i>
                    <span>控制台</span>
                </div>
                <div class="nav-item" data-page="persona">
                    <i data-lucide="users"></i>
                    <span>人设工坊</span>
                </div>
                <div class="nav-item" data-page="history">
                    <i data-lucide="history"></i>
                    <span>识别历史</span>
                </div>
                <div class="nav-item" data-page="settings">
                    <i data-lucide="settings-2"></i>
                    <span>系统设置</span>
                </div>
            </nav>

            <div class="nav-item" style="margin-top: auto;" data-page="about">
                <i data-lucide="info"></i>
                <span>关于软件</span>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            
            <!-- HOME PAGE -->
            <section id="home" class="page active">
                <header>
                    <div>
                        <h1>欢迎回来</h1>
                        <p class="subtitle">您的智能语音助手已就绪</p>
                    </div>
                </header>

                <div class="bento-grid">
                    <div class="widget">
                        <div class="stat-label">识别总数</div>
                        <div class="stat-value">1,284</div>
                        <div class="subtitle">本月增长 +12%</div>
                    </div>
                    <div class="widget">
                        <div class="stat-label">累计字数</div>
                        <div class="stat-value">42.5k</div>
                        <div class="subtitle">大约节省了 8 小时打字时间</div>
                    </div>
                    <div class="widget">
                        <div class="stat-label">平均准确率</div>
                        <div class="stat-value">98.2%</div>
                        <div class="subtitle">基于火山引擎 ASR 引擎</div>
                    </div>
                    
                    <div class="widget large">
                        <div class="stat-label">近期动态</div>
                        <div style="margin-top: 16px;">
                            <div class="activity-chart">
                                <div class="chart-bar" style="height: 40%; animation-delay: 0.1s"></div>
                                <div class="chart-bar" style="height: 60%; animation-delay: 0.2s"></div>
                                <div class="chart-bar" style="height: 35%; animation-delay: 0.3s"></div>
                                <div class="chart-bar" style="height: 80%; animation-delay: 0.4s"></div>
                                <div class="chart-bar" style="height: 50%; animation-delay: 0.5s"></div>
                                <div class="chart-bar" style="height: 95%; animation-delay: 0.6s"></div>
                                <div class="chart-bar" style="height: 70%; animation-delay: 0.7s"></div>
                            </div>
                        </div>
                    </div>

                    <div class="widget">
                        <div class="stat-label">当前人设</div>
                        <div style="margin-top: 20px; display: flex; align-items: center; gap: 12px;">
                            <div class="brand-icon" style="width: 40px; height: 40px; border-radius: 50%;">
                                <i data-lucide="user-check" color="white" size="20"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600; font-size: 14px;">正式商务</div>
                                <div class="subtitle">已启用 LLM 润色</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="demo-section">
                    <div class="stat-label" style="margin-bottom: 12px;">实时状态预览 (交互演示)</div>
                    <div class="floating-preview">
                        <div class="overlay"></div>
                        <div id="floatingPill" class="floating-pill">
                            <div id="statusIndicator" class="status-dot animate-pulse"></div>
                            <span id="floatingText" class="status-text">正在录音... 00:04</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 16px;">
                        <button class="nav-item-btn" onclick="simulateStatus('recording')">
                            <i data-lucide="mic" size="14"></i> 模拟录音
                        </button>
                        <button class="nav-item-btn" onclick="simulateStatus('polishing')">
                            <i data-lucide="wand-2" size="14"></i> 模拟润色
                        </button>
                        <button class="nav-item-btn" onclick="simulateStatus('done')">
                            <i data-lucide="check" size="14"></i> 模拟完成
                        </button>
                    </div>
                </div>
            </section>

            <!-- PERSONA PAGE -->
            <section id="persona" class="page">
                <header>
                    <div>
                        <h1>人设工坊</h1>
                        <p class="subtitle">配置 LLM 润色引擎的“人格”</p>
                    </div>
                    <button class="nav-item-btn primary" onclick="openPersonaModal()">
                        <i data-lucide="plus" size="16"></i> 新建人设
                    </button>
                </header>
                <div class="persona-grid">
                    <div class="persona-card active" onclick="selectPersona(this)">
                        <div class="persona-icon"><i data-lucide="briefcase"></i></div>
                        <h3 style="margin-bottom: 8px;">正式商务</h3>
                        <p class="subtitle" style="font-size: 12px;">将口语化的表达转换为严谨、专业的商务风格。</p>
                        <div class="persona-actions">
                            <button class="icon-btn" onclick="event.stopPropagation(); openPersonaModal('正式商务')"><i data-lucide="edit-2" size="14"></i></button>
                        </div>
                    </div>
                    <div class="persona-card" onclick="selectPersona(this)">
                        <div class="persona-icon"><i data-lucide="party-popper"></i></div>
                        <h3 style="margin-bottom: 8px;">社交达人</h3>
                        <p class="subtitle" style="font-size: 12px;">语气活泼，增加适当的表情符号。</p>
                        <div class="persona-actions">
                             <button class="icon-btn" onclick="event.stopPropagation(); openPersonaModal('社交达人')"><i data-lucide="edit-2" size="14"></i></button>
                             <button class="icon-btn danger" onclick="event.stopPropagation()"><i data-lucide="trash-2" size="14"></i></button>
                        </div>
                    </div>
                    <div class="persona-card" onclick="selectPersona(this)">
                        <div class="persona-icon"><i data-lucide="zap"></i></div>
                        <h3 style="margin-bottom: 8px;">极简模式</h3>
                        <p class="subtitle" style="font-size: 12px;">仅进行必要的纠错，不做修饰。</p>
                        <div class="persona-actions">
                             <button class="icon-btn" onclick="event.stopPropagation(); openPersonaModal('极简模式')"><i data-lucide="edit-2" size="14"></i></button>
                             <button class="icon-btn danger" onclick="event.stopPropagation()"><i data-lucide="trash-2" size="14"></i></button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- HISTORY PAGE -->
            <section id="history" class="page">
                <header>
                    <div>
                        <h1>识别历史</h1>
                        <p class="subtitle">管理您的语音记录与导出</p>
                    </div>
                    <button class="nav-item-btn danger-hover">
                        <i data-lucide="trash-2" size="16"></i> 清空历史
                    </button>
                </header>
                <div class="history-list">
                    <div class="history-item" onclick="toggleHistoryDetail(this)">
                        <div style="flex: 1;">
                            <div class="history-text">“今天下午两点在三号会议室开会，讨论关于 UI 设计重构的方案。”</div>
                            <div class="history-meta" style="margin-top: 4px;">
                                <i data-lucide="clock" size="12" style="display:inline; vertical-align:middle"></i> 14:02 · 正式商务 · 120字
                            </div>
                        </div>
                        <i data-lucide="chevron-down" class="chevron"></i>
                    </div>
                    <div class="history-detail" style="display:none;">
                        <div class="detail-block">
                            <span class="detail-label">识别原文</span>
                            <p>今天下午两点在三号会议室开会讨论关于UI设计重构的方案</p>
                        </div>
                        <div class="detail-block">
                            <span class="detail-label">润色结果</span>
                            <p>今天下午两点在三号会议室开会，讨论关于 UI 设计重构的方案。</p>
                        </div>
                        <div class="detail-actions">
                            <button class="nav-item-btn small"><i data-lucide="copy" size="14"></i> 复制结果</button>
                            <button class="nav-item-btn small"><i data-lucide="copy" size="14"></i> 复制原文</button>
                        </div>
                    </div>

                    <div class="history-item" onclick="toggleHistoryDetail(this)">
                        <div style="flex: 1;">
                            <div class="history-text">“帮我定个闹钟明早八点，然后顺便查一下明天的天气预报。”</div>
                            <div class="history-meta" style="margin-top: 4px;">
                                <i data-lucide="clock" size="12" style="display:inline; vertical-align:middle"></i> 13:45 · 极简模式 · 45字
                            </div>
                        </div>
                         <i data-lucide="chevron-down" class="chevron"></i>
                    </div>
                     <div class="history-detail" style="display:none;">
                        <div class="detail-block">
                            <span class="detail-label">识别原文</span>
                            <p>帮我定个闹钟明早八点然后顺便查一下明天的天气预报</p>
                        </div>
                        <div class="detail-block">
                            <span class="detail-label">润色结果</span>
                            <p>帮我定个闹钟明早八点，然后顺便查一下明天的天气预报。</p>
                        </div>
                        <div class="detail-actions">
                            <button class="nav-item-btn small"><i data-lucide="copy" size="14"></i> 复制结果</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SETTINGS PAGE -->
            <section id="settings" class="page">
                <header>
                    <div>
                        <h1>系统设置</h1>
                        <p class="subtitle">深度配置您的智能语音交互</p>
                    </div>
                </header>

                <div class="sub-tabs">
                    <div class="sub-tab-item active" onclick="switchSettingsTab('voice')">语音识别 (ASR)</div>
                    <div class="sub-tab-item" onclick="switchSettingsTab('llm')">大模型 (LLM)</div>
                    <div class="sub-tab-item" onclick="switchSettingsTab('hotkey')">快捷键</div>
                    <div class="sub-tab-item" onclick="switchSettingsTab('general')">常规设置</div>
                </div>

                <!-- ASR Settings -->
                <div id="settings-voice" class="settings-panel active-panel">
                    <div style="display: flex; gap: 32px;">
                        <div style="width: 240px; flex-shrink: 0;">
                            <div class="provider-list">
                                <div class="provider-item active">
                                    <div class="provider-logo">火山</div>
                                    <div class="provider-info">
                                        <div class="provider-name">火山引擎 <span class="provider-status status-online">在线</span></div>
                                        <div class="subtitle" style="font-size: 10px;">字节跳动 ASR 服务</div>
                                    </div>
                                </div>
                                <div class="provider-item">
                                    <div class="provider-logo">腾讯</div>
                                    <div class="provider-info">
                                        <div class="provider-name">腾讯云</div>
                                        <div class="subtitle" style="font-size: 10px;">腾讯 ASR 引擎</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="flex: 1; background: white; padding: 24px; border-radius: var(--radius-md);">
                            <h3 style="margin-bottom: 20px; font-size: 16px;">火山引擎配置</h3>
                            <div class="form-group"><label class="form-label">App ID</label><input type="text" class="form-input" value="84271920"></div>
                            <div class="form-group"><label class="form-label">Access Key</label><input type="password" class="form-input" value="********"></div>
                            <div class="form-group"><label class="form-label">Secret Key</label><input type="password" class="form-input" value="********"></div>
                             <div class="form-group">
                                <label class="form-label">静音阈值 (VAD)</label>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <input type="range" class="form-range" min="0" max="100" value="30">
                                    <span style="font-size: 13px; font-weight: 600; color: var(--primary);">30ms</span>
                                </div>
                            </div>
                            <button class="nav-item-btn primary" style="width: 100%;">保存并校验</button>
                        </div>
                    </div>
                </div>

                <!-- LLM Settings -->
                <div id="settings-llm" class="settings-panel" style="display: none;">
                    <div style="display: flex; gap: 32px;">
                        <div style="width: 240px; flex-shrink: 0;">
                            <div class="provider-list">
                                <div class="provider-item active">
                                    <div class="provider-logo">GPT</div>
                                    <div class="provider-info">
                                        <div class="provider-name">OpenAI <span class="provider-status status-online">在线</span></div>
                                        <div class="subtitle" style="font-size: 10px;">GPT-4o / 3.5</div>
                                    </div>
                                </div>
                                <div class="provider-item">
                                    <div class="provider-logo">Deep</div>
                                    <div class="provider-info">
                                        <div class="provider-name">DeepSeek</div>
                                        <div class="subtitle" style="font-size: 10px;">V3 / R1</div>
                                    </div>
                                </div>
                                <div class="provider-item">
                                    <div class="provider-logo"><i data-lucide="globe"></i></div>
                                    <div class="provider-info">
                                        <div class="provider-name">Custom</div>
                                        <div class="subtitle" style="font-size: 10px;">Compatible API</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="flex: 1; background: white; padding: 24px; border-radius: var(--radius-md);">
                            <h3 style="margin-bottom: 20px; font-size: 16px;">接口配置</h3>
                            <div class="form-group"><label class="form-label">Base URL</label><input type="text" class="form-input" value="https://api.openai.com/v1"></div>
                            <div class="form-group"><label class="form-label">API Key</label><input type="password" class="form-input" value="********"></div>
                            <div class="form-group"><label class="form-label">模型 (Model)</label><input type="text" class="form-input" value="gpt-4o"></div>
                            <button class="nav-item-btn primary" style="width: 100%;">测试连接</button>
                        </div>
                    </div>
                </div>

                <!-- Hotkey Settings -->
                 <div id="settings-hotkey" class="settings-panel" style="display: none;">
                    <div class="settings-group">
                         <div class="setting-item">
                            <div style="flex: 1;">
                                <div style="font-weight: 500; font-size: 14px;">录音快捷键</div>
                                <div class="subtitle">按下此键开始/停止录音</div>
                            </div>
                            <div class="hotkey-input active">Caps Lock</div>
                        </div>
                        <div class="setting-item">
                            <div style="flex: 1;">
                                <div style="font-weight: 500; font-size: 14px;">取消录音</div>
                                <div class="subtitle">放弃本次输入</div>
                            </div>
                             <div class="hotkey-input">Esc</div>
                        </div>
                    </div>
                </div>

                <!-- General Settings -->
                <div id="settings-general" class="settings-panel" style="display: none;">
                    <div class="settings-group">
                        <div class="setting-item">
                            <div><div style="font-weight: 500; font-size: 14px;">开机自启动</div><div class="subtitle">登录 Windows 时自动运行</div></div>
                            <div class="switch active" onclick="this.classList.toggle('active')"></div>
                        </div>
                        <div class="setting-item">
                            <div><div style="font-weight: 500; font-size: 14px;">自动粘贴</div><div class="subtitle">识别完成后自动粘贴到当前窗口</div></div>
                            <div class="switch active" onclick="this.classList.toggle('active')"></div>
                        </div>
                         <div class="setting-item">
                            <div><div style="font-weight: 500; font-size: 14px;">提示音效</div><div class="subtitle">开始和结束时播放音效</div></div>
                            <div class="switch" onclick="this.classList.toggle('active')"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ABOUT PAGE -->
            <section id="about" class="page">
                <header><div><h1>关于软件</h1><p class="subtitle">Sayble v1.0.4</p></div></header>
                <div style="background: white; padding: 40px; border-radius: var(--radius-lg); text-align: center;">
                    <div class="brand-icon" style="width: 80px; height: 80px; margin: 0 auto 24px; border-radius: 20px;">
                        <i data-lucide="mic-2" color="white" size="40"></i>
                    </div>
                    <h2 style="margin-bottom: 8px;">Sayble</h2>
                    <p class="subtitle" style="max-width: 400px; margin: 0 auto 24px;">让语音输入变得更智能。通过 ASR 实时识别，结合 LLM 深度润色，为您提供最精准的文字表达体验。</p>
                    <div class="nav-item-btn">检查更新</div>
                </div>
            </section>

        </main>
    </div>

    <!-- Modal Overlay -->
    <div id="modalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">编辑人设</h3>
                <button class="icon-btn" onclick="closeModal()"><i data-lucide="x" size="20"></i></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">人设名称</label>
                    <input type="text" class="form-input" id="personaNameInput" value="正式商务">
                </div>
                <div class="form-group">
                    <label class="form-label">提示词 (Prompt)</label>
                    <textarea class="form-textarea" id="personaPromptInput" rows="6">请将以下口语化的文字转换为书面语，只输出润色后的文字。</textarea>
                    <div class="form-hint">通过提示词定义 LLM 对您的语音内容的润色风格。</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="nav-item-btn" onclick="closeModal()">取消</button>
                <button class="nav-item-btn primary" onclick="closeModal()">保存</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize Icons
        lucide.createIcons();

        // Page Switching
        const navItems = document.querySelectorAll('.nav-item[data-page]');
        const pages = document.querySelectorAll('.page');
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const pageId = item.getAttribute('data-page');
                navItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                pages.forEach(p => p.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
            });
        });

        // Settings Tabs
        function switchSettingsTab(tab) {
            const tabs = document.querySelectorAll('.sub-tab-item');
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.settings-panel').forEach(p => p.style.display = 'none');
            document.getElementById('settings-' + tab).style.display = 'block';
        }

        // Provider Switching
        document.querySelectorAll('.provider-item').forEach(item => {
            item.addEventListener('click', () => {
                item.parentElement.querySelectorAll('.provider-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
            });
        });

        // Simulator
        function simulateStatus(status) {
            const indicator = document.getElementById('statusIndicator');
            const text = document.getElementById('floatingText');
            const pill = document.getElementById('floatingPill');
            indicator.className = 'status-dot';
            if (status === 'recording') {
                indicator.classList.add('animate-pulse'); indicator.style.background = '#ef4444'; text.innerText = '正在录音... 00:04'; pill.style.borderColor = 'rgba(239, 68, 68, 0.4)';
            } else if (status === 'polishing') {
                indicator.classList.add('animate-spin'); indicator.style.background = 'transparent'; text.innerText = '润色中...'; pill.style.borderColor = 'rgba(99, 102, 241, 0.4)';
            } else if (status === 'done') {
                indicator.style.background = '#10b981'; text.innerText = '已复制到剪贴板'; pill.style.borderColor = 'rgba(16, 185, 129, 0.4)';
            }
        }

        // Persona Selection
        function selectPersona(card) {
            document.querySelectorAll('.persona-card').forEach(c => c.classList.remove('active'));
            card.classList.add('active');
        }

        // Modal Logic
        const modalOverlay = document.getElementById('modalOverlay');
        const modalTitle = document.getElementById('modalTitle');
        const nameInput = document.getElementById('personaNameInput');

        function openPersonaModal(name = '') {
            modalOverlay.style.display = 'flex';
            if (name) {
                modalTitle.innerText = '编辑人设';
                nameInput.value = name;
            } else {
                modalTitle.innerText = '新建人设';
                nameInput.value = '';
            }
        }

        function closeModal() {
            modalOverlay.style.display = 'none';
        }

        // History Detail Toggle
        function toggleHistoryDetail(item) {
            console.log('toggle');
            const detail = item.nextElementSibling;
            const chevron = item.querySelector('.chevron');
            if (detail.style.display === 'none') {
                detail.style.display = 'block';
                // chevron.style.transform = 'rotate(180deg)'; // css class preferred
            } else {
                detail.style.display = 'none';
            }
        }
    </script>
</body>
</html>
